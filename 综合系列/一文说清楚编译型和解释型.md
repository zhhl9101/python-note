# 一文说清楚编译型和解释型
<p align="right">2021年8月，时间结余。</p>

---

### 0. 案例

> 现代化技术的灵感来源于现实生活。    --无名氏

现在有一篇前言的技术型文章，很明显，英文写的，你看不懂。

如果想懂，2种方式：

1)，找人将文章翻译成中文版本，你可以看无数次。--编译型

2)，把英文专业的同学叫过来，直接将文章逐行翻译给你听，也可以翻译给母语为俄语的人听。--解释型

各有利弊。

---


### 1. 将代码转换成机器码

我们编写的代码是人类语言，英文单词和数字的堆积，我们自己能够轻松理解；但是对于计算机硬件(CPU)，代码就是天书，根本不认识。在程序被运行之前必须先将代码转换成二进制指令。

二进制指令，也就是**机器码**，是CPU能够识别的硬件层面的“代码”。

机器码示例：

- 指令示例
  1. 0000 代表 加载（LOAD）
  2. 0001 代表 存储（STORE）

- 寄存器示例
  1. 0000 代表寄存器 A
  2. 0001 代表寄存器 B

- 存储器部分的示例
  1. 000000000001 代表地址为 1 的存储器
  2. 000000010000 代表地址为 16 的存储器

- 集成示例
  1. 0000,0000,000000010000 代表 LOAD A, 16
  2. 0000,0001,000000000001 代表 LOAD B, 1
  3. 0001,0001,000000010000 代表 STORE B, 16
  4. 0001,0001,000000000001 代表 STORE B, 1

究竟在什么时候将代码转换成二进制指令呢？不同的编程语言有不同的规定：

- 有的编程语言要求必须提前将所有代码一次性转换成二进制指令，也就是生成一个可执行文件（Windows下的.exe），比如C语言、C++、Rust 、Go、汇编等，这种编程语言称为**编译型语言**，使用的转换工具称为**编译器**。
- 有的编程语言可以一边执行一边转换，执行到哪里就转换哪些代码，不会生成可执行程序，比如 Python、Ruby、JavaScript、PHP、Shell、MATLAB等，这种编程语言称为**解释型语言**，使用的转换工具称为**解释器**。

编译型语言和解释型语言的执行流程：

 <img src="..\pictures\comprehensive\jieshixinghebianyixing.jpg" title="编译器和解释器" width="400px" height="400px">

---

### 2. 编译型语言

对于编译型语言，开发完成以后需要将所有的代码都转换成可执行文件，比如Windows下的.exe文件，可执行文件里面包含的就是机器码。只要我们拥有可执行文件，就可以随时运行，不用再重新编译了，也就是“一次编译，无限次运行”。

在运行的时候，我们只需要可执行文件，不再需要源代码和编译器了。

编译型语言一般是不能跨平台的，也就是不能在不同的操作系统之间随意切换。

编译型语言不能跨平台表现在两个方面：

#### 1) 可执行文件不能跨平台

比如，不能将Windows下的.exe拿到Linux下使用，也不能将Linux下的可执行文件拿到Mac OS下使用（虽然它们都是类Unix系统）。

#### 2) 源代码不能跨平台

不同平台支持的函数、类型、变量等都可能不同，基于某个平台编写的代码一般不能拿到另一个平台下编译。

我们以C语言为例来说明。

【实例】在C语言中要想让程序暂停可以使用“睡眠”函数，在Windows平台下该函数是Sleep()，在Linux平台下该函数是sleep()，首字母大小写不同。其次，Sleep()的参数是毫秒，sleep()的参数是秒，单位也不一样。

以上两个原因导致使用“睡眠”函数的C语言代码不能跨平台，除非在代码层面做出兼容性处理，非常麻烦。

---

### 3. 解释型语言

对于解释型语言，每次执行程序都需要一边转换一边执行，用到哪些代码就将哪些代码转换成机器码，用不到的不进行任何处理。

因为每次执行程序都需要重新转换代码，所以解释型语言的执行效率天生就低于编译型语言，甚至存在数量级的差距。但随着**即时编译（JIT）**的应用，差距也在缩小。

计算机的一些底层功能，或者关键算法，一般都使用C/C++实现，只有在应用层面（比如网站开发、小工具等）才会使用解释型语言。

在运行解释型语言的时候，我们始终都需要源代码和解释器。

解释型语言的程序几乎都能跨平台，“一次编写，到处运行”，这一切都要归功于解释器！

我们所说的跨平台，是指源代码跨平台，而不是解释器跨平台。

解释器用来将源代码转换成机器码，它就是一个可执行文件，是绝对不能跨平台的。

官方需要针对不同的平台开发不同的解释器，这些解释器必须要能够遵守同样的语法，识别同样的函数，完成同样的功能，只有这样，同样的代码在不同平台的执行结果才是相同的。

在不同的平台下，解释器会将相同的源代码转换成不同的机器码，解释器帮助我们屏蔽了不同平台之间的差异。

---

### 4. 总结

当我们说“下载一个程序（软件）”时，不同类型的语言有不同的含义：

- 对于编译型语言，我们下载到的是可执行文件，源代码被作者保留，所以编译型语言的程序一般是闭源的。
- 对于解释型语言，我们下载到的是源代码，因为作者不给源代码就没法运行，所以解释型语言的程序一般是开源的。

---

### 附录

1. [编译型语言和解释型语言的区别 (biancheng.net)](http://c.biancheng.net/view/4136.html)
2. [机器语言 - 维基百科，自由的百科全书 (wikipedia.org)](https://zh.wikipedia.org/wiki/机器语言)

