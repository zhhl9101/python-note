# 字符编码的那些事
<p align="right">2021年5月，时间结余。</p>

---

### 0. 巴别塔

巴别塔之后，人类语言交流有了隔阂。

> 据《圣经·旧约·创世记》第11章记载，当时人类联合起来计划兴建能通往天堂的高塔；为了阻止人类的计划，上帝让人类说不同的语言，使人类相互之间不能沟通，计划因此失败，人类自此各散东西。此塔有名通天塔，又名巴别塔（“混乱”之意）。

巴别塔油画：

 <img src="..\pictures\comprehensive\babel.jpg" title="巴别塔" width="600px" height="350px">

---

### 1. 计算机、电子管、晶体管，都是什么玩意？

世界上第一台通用计算机“ENIAC”于1946年2月14日在美国宾夕法尼亚大学诞生。美国国防部用它来进行弹道计算。

它是一个庞然大物，用了18000个**电子管**，占地170平方米，重达30吨，每秒钟可进行5000次运算。“ENIAC”以**电子管**作为元器件，所以又被称为电子管计算机，是计算机的第一代。

“ENIAC“：

 <img src="..\pictures\comprehensive\eniac.jpg" title="ENIAC" width="600px" height="350px">

当初使用的电子管指的是**三极管**：

 <img src="..\pictures\comprehensive\sanjiguan.jpg" title="三极管" width="600px" height="350px">

 三极管原理：给集电极C通上电，然后程序指令控制基极B是否加电压。

- 若基极B加电压，集电极C和发射极E通电，即发射极E为高电压。

- 若基极B不加电压，集电极C和发射极E不通电，即发射极E为低电压。

这就是，三极管是个开关。

将三极管接到电路中，即可控制电路输出电压的高和低，表示为1和0。这就是为什么计算机使用二进制的原因。

至于怎么将1和0的指令转化为高低电压给到基极B，怎么将电路输出的高低电压转化为1和0，那就是电子工程师的事情了。

 <img src="..\pictures\comprehensive\sanjiguanfenlei.jpg" title="三极管分类" width="600px" height="350px">

时间来到20世纪，电子管早已发展成**晶体管**。晶体管其实就是一种固体半导体器件，功能和电子管类似，作为一种可以变化电流的开关，可以基于输入电压控制输出电流，和一般机械开关不同之处在于晶体管是利用电讯号来控制，而且开关速度非常快。晶体管被集成在CPU和内存里，纳米级别的大小，早都不是我们肉眼可以看到的了。

---

### 2. 位，比特，字节，千字节，字符编码，傻傻分不清楚

CPU和内存条可以计算和存储数据，怎么做到的呢？

1GB内存条包含了约160-480亿个晶体管，这些元器件，组成了无数的电路。

第1节说过，每个电路都可以输出1或0两种状态。这个1或0我们叫做 1**比特**(1bit)， 简称1b，翻译过来叫 1**位** 。

1bit只能表示两个数字，1或0。

怎么表示数字2-9呢？

用多个bit组合起来表示！比如，我们用2个电路，输出就有2个bit，每个bit都有1和0两种状态，那么总共就有4种组合，00|01|10|11，那么我们就可以用这4个组合来表示4个数字：

 <img src="..\pictures\comprehensive\bitzuhe.jpg" title="三极管分类" width="250px" height="50px">

为什么这么对应呢？为什么不用‘11’来表示1或2，而是表示3呢？这就涉及到**二进制**了。

为了让这种对应关系有规律，方便计算，科学家根据电路只能输出2种状态的特点设计出了二进制，即满2进1。

我们用'00'表示0，表示1的话就是0+1，即`‘00’+1=‘01’`，即用‘01’表示1。

表示2的话就是1+1，即`‘01’+1=‘10’`，满2进1，即用‘10’表示2。同理可得，用‘11’表示3。

这就是**编码**。

**编码**即用1和0的组合来表示数字/字母/符号，以达到能让计算机处理的目的。数字/字母/符号统称为**字符**，即我们要和计算机沟通，需要进行**字符编码**。

2个bit只有4种组合，只能表示4个数字，怎么表示更多的字符呢？多用几个bit！

用几个bit呢？计算机是美国人发明的，美国的语言中，数字+字母+符号大约有128个，所有他们用7个bit就能有128个组合来表示。为了以后可扩展，多用1个bit备用，所以美国人定义用8个bit来表示美国语言中的所有字符，规定8个bit为一个单位，这个单位叫**字节**(Byte)，简称B，**注意：字节是大写的B， 比特(位)是小写的b。**

所以，`1B = 8b`，即 1字节 = 8比特。

现实生活中我们有1元，10元，100元。计算机中也有“大面额”字节，比如**千字节**(KB)，兆字节(MB)等。

`1KB = 1024B = 8192b`

为什么1KB = 1024B，而不是1000B呢？这有个很长的故事要讲。

在linux和macOS系统中，1千字节 = 1000字节，表示为`1kB = 1000B`

在windows系统中，认为1千 = 10x10x10 = 1000是以十进制计算的，计算机中应该以二进制计算，即1千 = 2x2x2x2x2x2x2x2x2x2 = 1024，即1千字节 = 1024字节，表示为`1KB = 1000B`。

注意：一个是小写的kB， 一个是大写的KB。

都是历史遗留问题！

---

### 3. ASCII码表

洪荒之初，美国人用8位比特即1个字节来对美国语言的128个字符进行编码，8个比特只用到了后7个，最高位为0备用。即形成了最开始的ASCII码表，全称American Standard Code for Information Interchange，美国信息互换标准编码表。如下：

 <img src="..\pictures\comprehensive\ASCII.png" title="ASCII表" width="600px" height="350px">

这样，每个字符都有了自己的数字ID，计算机只需要处理这些1和0的数字就行了。

比如：我们要写入和读取字母“H”，我们先从表中查找“H”的编码是01001000，我们把01001000这组数字代表的高低电压给到8个电路，内存就存下了“H”；我们从8个电路的输出获取到01001000，就输出了“H”。







### 附录

1. [【科普】计算机为什么使用二进制（原创科普性微课）](https://www.bilibili.com/video/BV1Eb411n7fE)
2. [一文说清文本编码那些事](https://zhuanlan.zhihu.com/p/113772793)
3. [字符编码的前世今生——tgideas](https://tgideas.qq.com/webplat/info/news_version3/804/808/811/m579/201307/218730.shtml)
4. [字符编码的前世今生——一文读懂字符编码](https://cloud.tencent.com/developer/article/1450938)
5. [字符编码的前世今生——博客园](https://www.cnblogs.com/gollong/p/9359548.html)
6. [字符编码的前世今生——CSDN](https://blog.csdn.net/djh1179/article/details/102241469)
7. [Python 理清编码问题 : 从 ASCII 到 GB 系列](https://blog.csdn.net/BF02jgtRS00XKtCx/article/details/115410357)
8. [高低电平怎么转化为数字信号0和1](https://www.dgzj.com/dianzi/101441.html)
9. [《模拟电路》三极管工作原理及应用3D动画讲解](https://www.bilibili.com/video/BV1iA411x7Ke?from=search&seid=17314223776231235223)

